<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: v1/js/taskDisplay.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: v1/js/taskDisplay.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Custom HTML element encapsulating the display of current and next task during a pomo
 * @extends HTMLElement
 */

export default class TaskDisplay extends HTMLElement {

    /**
     * Attributes that this object observes
     * @static
     * @type {String[]}
     */
    static get observedAttributes() { return ["currtask", "nexttask", "numtasks"]; }

    /**
     * Constructor. Initializes elements of taskdisplay, and default valu of attributes.
     */
    constructor() {
        super();
        //wrapper div
        let o_wrapper_obj = document.createElement("div");
        o_wrapper_obj.className = "middle-container";

        //current task header
        let o_curr_title = document.createElement("h3");
        o_curr_title.innerText = "Current Task:";

        //div for box displaying current
        let o_curr_disp = document.createElement("div");
        o_curr_disp.id = "current";
        o_curr_disp.innerHTML = "Do this";

        let o_wrap_btn = document.createElement("span");
        o_wrap_btn.id = "wrap-check-btn";
        o_wrap_btn.className = "btn-wrapper";

        //check button
        let o_check_btn = document.createElement("button");
        o_check_btn.className = "btn";
        o_check_btn.id = "check";
        o_check_btn.title = TaskDisplay.S_CHECK_BUTTON_TITLE;

        let o_next_btn = document.createElement("i");
        o_next_btn.classList.add("fas", "fa-check-circle", "fa-x", "tool");

        let o_error_mssg = document.createElement("span");
        o_error_mssg.id = "check-error";
        o_error_mssg.className = "error-mssg";
        o_error_mssg.innerHTML = TaskDisplay.S_CHECK_ERROR;

        // assign event handler for checking tasks off
        let f_handle_check = () => { document.EventBus.fireEvent("nextTask") };
        o_check_btn.addEventListener("click", f_handle_check);
        o_check_btn.append(o_next_btn);

        o_wrap_btn.append(o_check_btn, o_error_mssg);

        //header for next task
        let o_next_title = document.createElement("h3");
        o_next_title.innerText = "Next Task";

        //div for box displaying next
        let o_next_disp = document.createElement("div");
        o_next_disp.id = "next";

        o_wrapper_obj.append(o_curr_title, o_curr_disp, o_wrap_btn, o_next_title, o_next_disp);
        this.append(o_wrapper_obj);

        /*keeps track of the number of tasks*/
        this.setAttribute("numtasks", 0);
        this.setAttribute("currtask", -1);
        this.setAttribute("nexttask", -1);

        this.handleEndSession();
    }

    /**
     * Handler for when attributes are changed
     * An attribute name is passed in to select the element in the taskDisplay, append
     * its respective attributes are changed based on the name passed in
     * @param {String} name name of changed attribute
     * @param {*} oldValue old value of attribute
     * @param {*} newValue new value of attribute
     */
    attributeChangedCallback(name, oldValue, newValue) {
        this.wrapperAttributeFunction(name, oldValue, newValue);
    }

    /**
     * Helper function for attributeChangedCallback:
     * When attributes are changed
     * An attribute name is passed in to select the element in the taskDisplay, append
     * its respective attributes are changed based on the name passed in
     * @param {String} name name of changed attribute
     * @param {*} oldValue old value of attribute
     * @param {*} newValue new value of attribute
     */
    wrapperAttributeFunction(name, oldValue, newValue) {
        // don't display tasks if 1 or none
        if (name == "numtasks" &amp;&amp; newValue &lt;= 1) {
            this.querySelector("#next").style.display = "none";
            this.getElementsByTagName("h3")[1].style.display = "none";
        }
        // if newValue (num of tasks) > 1, display current &amp; next task
        else if (name == "numtasks" &amp;&amp; newValue > 1) {
            this.querySelector("#next").style.display = "";
            this.getElementsByTagName("h3")[1].style.display = "";
        }
        else if (name == "currtask") {
            this.querySelector("#current").innerText = newValue;
        }
        else if (name == "nexttask") {
            this.querySelector("#next").innerText = newValue;
        }
    }

    /**
     * Helper function called from parent component to disable button during breaks.
     */
    disableCheck() {
        this.querySelector("#check").disabled = true;
        let o_S_CHECK_ERROR = this.querySelector("#check-error");
        o_S_CHECK_ERROR.title = "";
        o_S_CHECK_ERROR.classList.add("color-error");
    }

    /**
     * Helper function called from parent component to enable button.
     */
    enableCheck() {
        this.querySelector("#check").disabled = false;
        this.querySelector("#check-error").title = TaskDisplay.S_CHECK_TOOLTIP;
        this.querySelector("#check-error").classList.remove("color-error");
    }

    /**
     * Hides all TaskDisplay related items within task-display
     */
    handleEndSession() {
        this.querySelector(".middle-container").style.display = "none";
    }


    /**
     * shows all TaskDisplay related items within task-display
     */
    handleStartSession() {
        this.querySelector(".middle-container").style.display = "block";
    }
}

/**
 * Tooltip when check button is hovered upon
 * @static
 * @type {String}
 */
TaskDisplay.S_CHECK_TOOLTIP = "Task completed!";

/**
 * Error message when check button is incorrectly handled
 * @static
 * @type {String}
 */
TaskDisplay.S_CHECK_ERROR = "Tasks cannot be checked off during breaks!";

/**
 * Title message of check button
 * @static
 * @type {String}
 */
TaskDisplay.S_CHECK_BUTTON_TITLE = "Task completed";
customElements.define("task-display", TaskDisplay);


export { TaskDisplay }
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="EventBus.html">EventBus</a></li><li><a href="InstructionsBox.html">InstructionsBox</a></li><li><a href="module.html#.exports">exports</a></li><li><a href="Task.html">Task</a></li><li><a href="TaskList.html">TaskList</a></li><li><a href="TimerContainer.html">TimerContainer</a></li><li><a href="TimerDisplay.html">TimerDisplay</a></li></ul><h3>Global</h3><ul><li><a href="global.html#attributeChangedCallback">attributeChangedCallback</a></li><li><a href="global.html#disableCheck">disableCheck</a></li><li><a href="global.html#enableCheck">enableCheck</a></li><li><a href="global.html#handleEndSession">handleEndSession</a></li><li><a href="global.html#handleKeyBinds">handleKeyBinds</a></li><li><a href="global.html#handleStartSession">handleStartSession</a></li><li><a href="global.html#handleThemeBtnPressed">handleThemeBtnPressed</a></li><li><a href="global.html#hello">hello</a></li><li><a href="global.html#notify">notify</a></li><li><a href="global.html#observedAttributes">observedAttributes</a></li><li><a href="global.html#showInstructions">showInstructions</a></li><li><a href="global.html#showTaskList">showTaskList</a></li><li><a href="global.html#sum">sum</a></li><li><a href="global.html#wrapperAttributeFunction">wrapperAttributeFunction</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Thu Mar 18 2021 01:10:47 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
